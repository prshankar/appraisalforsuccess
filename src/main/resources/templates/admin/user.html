<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>Coach For Success</title>
    <meta name="description" content="top menu &amp; navigation" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link rel="stylesheet" href="../css/fonts.googleapis.com.css" />
    <link rel="stylesheet" href="../css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
    <link rel="stylesheet" href="../css/style-admin.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="../js/cfs.js"></script>
</head>
<body class="no-skin">
	<div id="navbar" class="navbar navbar-default navbar-collapse h-navbar ace-save-state" th:replace="layout/navbar :: navbar"></div>
	<div class="main-container ace-save-state" id="main-container">
	    <div id="sidebar" class="sidebar h-sidebar navbar-collapse collapse ace-save-state" th:replace="layout/menu :: menu"></div>
	    <div class="main-content">
            <div class="main-content-inner">
                <div class="page-content">
                    <div>
                        <h3 id="message"></h3>
                    </div>
                    <div class="page-header">
                        <h1>User List</h1>
                    </div>
                    <div class="box101">
                        <div id="add-comment">
                            <article class="form-part">
                                <div id="demo" class="collapse in">
                                    <div class="allergies insurance form-box">
                                        <div class="from-body-plan">
                                            <form id="userForm" method="POST" autocomplete="off" onreset="userFormReset()">
                                                <div class="panel-body form-horizontal payment-form">
                                                    <div class="formBox">
	                                                    <div class="row">
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	                               			 						<input type="text" id="firstName" name="firstName" required="required">
														            <div class="field-placeholder"><span>First Name</span></div>
	                                                            </div>
	                                                        </div>
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
							                                        <input type="text" id="lastName" name="lastName" required="required">
														            <div class="field-placeholder"><span>Last Name</span></div>
	                                                            </div>
	                                                        </div>
	                                                    </div>
	                                                    <div class="row">
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	                    						                   	<input type="text" id="employeeNumber" name="employeeNumber">
														            <div class="field-placeholder"><span>Employee Number</span></div>
	                                                           </div>
	                                                        </div>
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	                    						                    <input type="text" id="mobileNumber" name="mobileNumber" required="required" />
														            <div class="field-placeholder"><span>Mobile Number</span></div>
	                                                           </div>
	                                                        </div>
	                                                    </div>
	                                                    <div class="row">
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	                                       							<input type="text" id="primaryEmail" name="primaryEmail" required="required" />
														            <div class="field-placeholder"><span>Primary Email ID</span></div>
	                                                           </div>
	                                                        </div>
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
		                                                            <select name="organisationId" style="width:200px;" class="operator">
	                                                                  	<option value="">Select Organisation</option>
																	   	<option th:each="organisation : ${organisations}" th:value="${{organisation.id}}" th:text="${organisation.name}"></option>
	   	                                                            </select>
	                                                           </div>
	                                                        </div>
	                                                    </div>
	                                                    <div class="row">
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
							                                        <input type="password" name="password" required="required" autocomplete="new-password" />
														            <div class="field-placeholder"><span>Password</span></div>
	                                                            </div>
	                                                        </div>
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	   	                                                            <select name="employeeType" style="width:200px;" class="operator">
	                                                                	<option value="">Select User Type</option>
	                                                                	<option value="MANAGER">Manager</option>
	                                                                	<option value="EMPLOYEE">Employee</option>
	   	                                                            </select>
	                                                           </div>
	                                                        </div>
	                                                    </div>
	                                                    <div class="row">
	                                                        <div class="col-sm-6">
	                                                            <div class="field-wrapper inputBox col-sm-12">
	                    						                    <input type="password" name="confirmpassword" required="required" autocomplete="new-password" />
														            <div class="field-placeholder"><span>Confirm Password</span></div>
	                                                           </div>
	                                                        </div>
	                                                    </div>
	                                                    <div class="clearfix form-actions">
	                                                        <div class="col-md-offset-3 col-md-9">
	                                                            <button class="btn btn-info" type="button"><i class="ace-icon fa fa-check bigger-110"></i>Update</button>
	                                                            &nbsp; &nbsp; &nbsp;
	                                                            <button class="btn" type="reset"><i class="ace-icon fa fa-undo bigger-110"></i>Reset</button>
	                                                        </div>
	                                                    </div>
                                                    </div>
                                                    <div class="clr"></div>
		                                            <input type="hidden" id="Authorization" name="Authorization">
													<input type="hidden" id="userId" name="userId">
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </article>
                            <article class="hy14 form-part">
                                <div id="demo" class="insu collapse in">
                                    <div id="userDiv" class="form-box">
                                        <table id="users" class="table table-striped table-bordered" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Employee No</th>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Employee Position</th>
                                                    <th>Status</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="user : ${users}">
                                                    <td th:text="${user.employeeNumber}"></td>
                                                    <td th:text="${user.firstName} + ' ' + ${user.lastName}"></td>
                                                    <td th:text="${user.primaryEmail}"></td>
                                                    <td th:text="${user.employeePosition}"></td>
                                                    <td th:text="${user.status}"></td>
                                                    <td>
                                                        <a href="#">
                                                            <button class="btn btn-xs btn-info" title="Edit User" th:onclick="updateUser([[${user}]])" sec:authorize="hasAnyRole('ROLE_SUPERUSER','ROLE_ADMIN','ROLE_MANAGER')">
                                                                <i class="ace-icon fa fa-pencil bigger-120"></i>
                                                            </button>
                                                        </a>
                                                        <a href="#">
                                                            <button class="btn btn-xs btn-info" title="Delete User" th:onclick="deleteUser([[${user}]])" sec:authorize="hasAnyRole('ROLE_SUPERUSER','ROLE_ADMIN')">
                                                                <i class="ace-icon fa fa-trash bigger-120"></i>
                                                            </button>
                                                        </a>
                                                        <a href="#">
                                                            <button class="btn btn-xs btn-info" title="Activate/Deactivate User" th:onclick="activateUser([[${user}]])" sec:authorize="hasAnyRole('ROLE_SUPERUSER')">
                                                                <i class="ace-icon fa bigger-120" th:classappend="${user.status} == 'ACTIVE' ? fa-toggle-on : fa-toggle-off"></i>
                                                            </button>
                                                        </a>
                                                        <a href="#">
	                                                        <button class="reviewButton btn btn-xs btn-info" title="Start Review" data-toggle="modal" data-target="#startDateModal" th:attr="data-user-id=${user.id},data-user-name=${user.firstName} + ' ' + ${user.lastName}" sec:authorize="hasAnyRole('ROLE_MANAGER')">
	                                                            <i class="ace-icon fa fa-tachometer bigger-120"></i>
	                                                        </button>
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </article>
                            <div class="clr"></div>
                        </div>
                    </div>
                </div><!-- /.page-content -->
            </div>
        </div>
        <form id="userModelForm" action="/updateReviewDate" method="POST">
	        <!-- Modal -->
			<div class="modal fade" id="startDateModal" tabindex="-1" role="dialog" aria-labelledby="startDateModalLabel" aria-hidden="true">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
                  <div>
                      <h3 id="modalMessage"></h3>
                  </div>
			      <div class="modal-header">
			        <h5 class="modal-title" id="startDateModalLabel">Start Review</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body">
	              	<div class="field-wrapper inputBox col-sm-12">
	  					<input type="text" data-date-format="dd-mm-yyyy" id="reviewDate" name="reviewDate" placeholder="Review Date" />
						<div class="field-placeholder"><span>Review Date</span></div>
					</div>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			        <button type="button" class="btn btn-primary" id="startReviewSubmit">Start Review</button>
			      </div>
			    </div>
			  </div>
			</div>
		    <input type="hidden" id="Authorization" name="Authorization">
			<input type="hidden" id="userId" name="userId">
		</form>
		<div id="footer" class="footer" th:replace="layout/footer :: footer"></div>
	    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
	        <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
	    </a>
	</div>
	<!-- /.main-container -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/ace-elements.min.js"></script>
    <script src="../js/ace.min.js"></script>
    <script src="../js/jquery.dataTables.min.js"></script>
    <script src="../js/dataTables.bootstrap.js"></script>
	<script src="../js/bootstrap-datepicker.js"></script>
    <script>
    	$(document).ready(function () {
    		showLabel();
    		showLabelForDate();
    	    $("#reviewDate").datepicker({
    	    	autoclose: true
    	    });
        	$('#users').DataTable();
	    });
    </script>
</body>
</html>